<!DOCTYPE html>
<html>
<head>
<title>p-adic numbers</title>
<script>
Number.prototype.forEach = function(a) {var i = 0; while (i < this) {a(i); i++}}
var canvas

onload = function(){
  var
  ctx,
  tau = 2 * Math.PI,
  scale = 256,
  p = parseInt(location.hash.slice(1)) || 7,
  radius = 1/p

  canvas = document.createElement('canvas')
  ctx = canvas.getContext('2d')

  canvas.setAttribute('width', screen.width)
  canvas.setAttribute('height', screen.height)

  ctx.translate(screen.width/2, screen.height/2)
  ctx.scale(scale, scale)
  ctx.lineWidth = 1/scale

  ctx.beginPath()
  ctx.arc(0, 0, radius, 0, tau, true)
  ctx.moveTo(1, 0)
  ctx.arc(0, 0, 1, 0, tau, true)
  ctx.stroke(); // !!

  (p-1).forEach(function(i) {
    ctx.beginPath()
    ctx.arc(Math.cos(tau/(p-1)*i), Math.sin(tau/(p-1)*i), radius, 0, tau, true)
    ctx.stroke()
  })

  document.body.appendChild(canvas)
}
onhashchange = function() {
  document.body.removeChild(canvas)
  onload()
}
</script>
</head>
<body>
</body>
</html>
