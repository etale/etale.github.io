<!DOCTYPE html>
<html>
<head>
<title>p-adic numbers</title>
<script>
Number.prototype.forEach = function (a) {var i = 0; while (i < this) {a(i); i++}}

var svg

onload = function () {
  var
  circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle'),
  p = parseInt(location.hash.slice(1)) || 7,
  theta = function (i) {return i * 2 * Math.PI / (p-1)},
  cx = function (i) {return Math.cos(theta(i))},
  cy = function (i) {return Math.sin(theta(i))}

  document.getElementsByTagName('title')[0].textContent = p.toString() + '-adic numbers'

  svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg')
  svg.setAttribute('viewBox', '-1.5 -1.5 3 3')

  circle.cx.baseVal.value = 0
  circle.cy.baseVal.value = 0
  circle.r .baseVal.value = 1
  circle.setAttribute('stroke-width', 1/128)
  circle.setAttribute('stroke', 'black')
  circle.setAttribute('fill', 'none')

  svg.appendChild(circle.cloneNode())
  circle.setAttribute('r', 1/p)
  svg.appendChild(circle)

  ;(p-1).forEach(function (i) {
    var c = circle.cloneNode()
    c.setAttribute('cx', cx(i))
    c.setAttribute('cy', cy(i))
    svg.appendChild(c)
  })

  document.body.appendChild(svg)
}
onhashchange = function () {
  document.body.removeChild(svg)
  onload()
}
</script>
</head>
<body></body>
</html>
